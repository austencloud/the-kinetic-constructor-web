/**
 * SVG imports for critical arrows
 * This ensures they're always available without network requests
 * Using direct imports from SVG files for better maintainability
 */

// Import SVG files directly using Vite's ?raw import
// PRO ARROWS - NON-RADIAL
import PRO_0_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_0.0.svg?raw';
import PRO_05_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_0.5.svg?raw';
import PRO_1_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_1.0.svg?raw';
import PRO_15_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_1.5.svg?raw';
import PRO_2_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_2.0.svg?raw';
import PRO_25_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_2.5.svg?raw';
import PRO_3_NONRADIAL_SVG from '$lib/assets/arrows/pro/from_nonradial/pro_3.0.svg?raw';

// PRO ARROWS - RADIAL
import PRO_0_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_0.0.svg?raw';
import PRO_05_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_0.5.svg?raw';
import PRO_1_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_1.0.svg?raw';
import PRO_15_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_1.5.svg?raw';
import PRO_2_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_2.0.svg?raw';
import PRO_25_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_2.5.svg?raw';
import PRO_3_RADIAL_SVG from '$lib/assets/arrows/pro/from_radial/pro_3.0.svg?raw';

// Import more anti arrows
import ANTI_0_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_0.0.svg?raw';
import ANTI_05_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_0.5.svg?raw';
import ANTI_1_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_1.0.svg?raw';
import ANTI_15_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_1.5.svg?raw';
import ANTI_2_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_2.0.svg?raw';
import ANTI_25_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_2.5.svg?raw';
import ANTI_3_NONRADIAL_SVG from '$lib/assets/arrows/anti/from_nonradial/anti_3.0.svg?raw';

// Import more anti radial arrows

import ANTI_0_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_0.0.svg?raw';
import ANTI_05_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_0.5.svg?raw';
import ANTI_1_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_1.0.svg?raw';
import ANTI_15_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_1.5.svg?raw';
import ANTI_2_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_2.0.svg?raw';
import ANTI_25_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_2.5.svg?raw';
import ANTI_3_RADIAL_SVG from '$lib/assets/arrows/anti/from_radial/anti_3.0.svg?raw';

// Import more dash arrows

import DASH_0_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_0.0.svg?raw';
import DASH_05_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_0.5.svg?raw';
import DASH_1_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_1.0.svg?raw';
import DASH_15_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_1.5.svg?raw';
import DASH_2_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_2.0.svg?raw';
import DASH_25_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_2.5.svg?raw';
import DASH_3_NONRADIAL_SVG from '$lib/assets/arrows/dash/from_nonradial/dash_3.0.svg?raw';

// Import more dash radial arrows
import DASH_0_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_0.0.svg?raw';
import DASH_05_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_0.5.svg?raw';
import DASH_1_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_1.0.svg?raw';
import DASH_15_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_1.5.svg?raw';
import DASH_2_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_2.0.svg?raw';
import DASH_25_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_2.5.svg?raw';
import DASH_3_RADIAL_SVG from '$lib/assets/arrows/dash/from_radial/dash_3.0.svg?raw';

// Import more static arrows
import STATIC_0_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_0.0.svg?raw';
import STATIC_05_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_0.5.svg?raw';
import STATIC_1_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_1.0.svg?raw';
import STATIC_15_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_1.5.svg?raw';
import STATIC_2_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_2.0.svg?raw';
import STATIC_25_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_2.5.svg?raw';
import STATIC_3_RADIAL_SVG from '$lib/assets/arrows/static/from_radial/static_3.0.svg?raw';

// Import more static non-radial arrows
import STATIC_0_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_0.0.svg?raw';
import STATIC_05_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_0.5.svg?raw';
import STATIC_1_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_1.0.svg?raw';
import STATIC_15_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_1.5.svg?raw';
import STATIC_2_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_2.0.svg?raw';
import STATIC_25_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_2.5.svg?raw';
import STATIC_3_NONRADIAL_SVG from '$lib/assets/arrows/static/from_nonradial/static_3.0.svg?raw';

// Import more float arrows
import FLOAT_SVG from '$lib/assets/arrows/float.svg?raw';

// Cache for colored SVGs to avoid repeated string operations
const coloredSvgCache = new Map<string, Map<string, string>>();

/**
 * Optimized function to get embedded arrow SVG by type, orientation, turns, and color
 * Uses caching and efficient string operations for better performance
 */
export function getEmbeddedArrowSvg(
	motionType: string,
	startOri: string,
	turns: number | string,
	color: string
): string | null {
	// Create a cache key for this specific arrow configuration
	const turnsStr = typeof turns === 'number' ? turns.toString() : turns;
	const cacheKey = `${motionType}-${startOri}-${turnsStr}`;

	// Determine if we're using radial or non-radial orientation
	const isRadial = startOri === 'in' || startOri === 'out';

	// Get the base SVG based on type, orientation and turns
	let baseSvg: string | null = null;

	// Fast path for common arrow types using direct assignment instead of conditionals
	// This reduces branching and improves performance
	if (motionType === 'float' && turnsStr === 'fl') {
		baseSvg = FLOAT_SVG;
	} else if (motionType === 'static') {
		if (isRadial) {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = STATIC_0_RADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = STATIC_05_RADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = STATIC_1_RADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = STATIC_15_RADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = STATIC_2_RADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = STATIC_25_RADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = STATIC_3_RADIAL_SVG;
		} else {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = STATIC_0_NONRADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = STATIC_05_NONRADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = STATIC_1_NONRADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = STATIC_15_NONRADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = STATIC_2_NONRADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = STATIC_25_NONRADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = STATIC_3_NONRADIAL_SVG;
		}
	} else if (motionType === 'pro') {
		// Use a more direct mapping approach for pro arrows
		if (isRadial) {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = PRO_0_RADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = PRO_05_RADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = PRO_1_RADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = PRO_15_RADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = PRO_2_RADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = PRO_25_RADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = PRO_3_RADIAL_SVG;
		} else {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = PRO_0_NONRADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = PRO_05_NONRADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = PRO_1_NONRADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = PRO_15_NONRADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = PRO_2_NONRADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = PRO_25_NONRADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = PRO_3_NONRADIAL_SVG;
		}
	} else if (motionType === 'dash') {
		if (isRadial) {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = DASH_0_RADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = DASH_05_RADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = DASH_1_RADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = DASH_15_RADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = DASH_2_RADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = DASH_25_RADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = DASH_3_RADIAL_SVG;
		} else {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = DASH_0_NONRADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = DASH_05_NONRADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = DASH_1_NONRADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = DASH_15_NONRADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = DASH_2_NONRADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = DASH_25_NONRADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = DASH_3_NONRADIAL_SVG;
		}
	} else if (motionType === 'anti') {
		if (isRadial) {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = ANTI_0_RADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = ANTI_05_RADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = ANTI_1_RADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = ANTI_15_RADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = ANTI_2_RADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = ANTI_25_RADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = ANTI_3_RADIAL_SVG;
		} else {
			if (turnsStr === '0' || turnsStr === '0.0') baseSvg = ANTI_0_NONRADIAL_SVG;
			else if (turnsStr === '0.5') baseSvg = ANTI_05_NONRADIAL_SVG;
			else if (turnsStr === '1' || turnsStr === '1.0') baseSvg = ANTI_1_NONRADIAL_SVG;
			else if (turnsStr === '1.5') baseSvg = ANTI_15_NONRADIAL_SVG;
			else if (turnsStr === '2' || turnsStr === '2.0') baseSvg = ANTI_2_NONRADIAL_SVG;
			else if (turnsStr === '2.5') baseSvg = ANTI_25_NONRADIAL_SVG;
			else if (turnsStr === '3' || turnsStr === '3.0') baseSvg = ANTI_3_NONRADIAL_SVG;
		}
	}

	// If we found a matching SVG, apply color using cached versions when possible
	if (baseSvg) {
		// Check if we already have a colored version of this SVG
		const colorCache = coloredSvgCache.get(cacheKey);
		if (colorCache && colorCache.has(color)) {
			return colorCache.get(color)!;
		}

		// Apply color transformation more efficiently
		const hexColor = color === 'red' ? '#ED1C24' : '#2E3192';

		// More efficient string replacement (avoid regex for better performance)
		const styleStart = baseSvg.indexOf('.st0{fill:#');
		if (styleStart !== -1) {
			const styleEnd = baseSvg.indexOf('}', styleStart);
			if (styleEnd !== -1) {
				const coloredSvg =
					baseSvg.substring(0, styleStart) +
					`.st0{fill:${hexColor}}` +
					baseSvg.substring(styleEnd + 1);

				// Cache the colored version for future use
				if (!colorCache) {
					coloredSvgCache.set(cacheKey, new Map([[color, coloredSvg]]));
				} else {
					colorCache.set(color, coloredSvg);
				}

				return coloredSvg;
			}
		}

		// Fallback to regex replacement if the more efficient method fails
		const coloredSvg = baseSvg.replace(/\.st0{fill:#[0-9A-Fa-f]{6};}/g, `.st0{fill:${hexColor};}`);

		// Cache the result
		if (!colorCache) {
			coloredSvgCache.set(cacheKey, new Map([[color, coloredSvg]]));
		} else {
			colorCache.set(color, coloredSvg);
		}

		return coloredSvg;
	}

	return null;
}
